<mujoco model="blood_vessel">
    <compiler angle="radian" coordinate="local"/>
    <option timestep="0.01" gravity="0 0 -9.8"/>

    <!-- Set up background -->
    <visual>
        <global offheight="480" offwidth="640" />
        <map znear="0.01" zfar="50" />
        <quality shadowsize="2048"/>
        <headlight ambient="0.6 0.6 0.6" diffuse="0.6 0.6 0.6" specular="0.3 0.3 0.3"/>
        <rgba fog="0.9 0.9 0.9 1"/> <!-- background color -->
    </visual>

    <asset>
        <mesh name="vessel_body"     file="./source/vessel_tube.obj"/>
        <mesh name="vessel_entrance" file="./source/vessel_entrance.obj"/>
        <mesh name="vessel_exit"     file="./source/vessel_exit.obj"/>
    </asset>

    <worldbody>
        <!-- Vessel body -->
        <body name="blood_vessel_body" pos="0 0 0">
            <!-- Visual only (not for collision) -->
            <geom type="mesh" mesh="vessel_body" rgba="1 0.4 0.4 0.4" contype="1" conaffinity="0"/>

            <!-- Collision shell (actual physical body)
            <geom type="cylinder" size="0.095 0.9" rgba="0 0 0 0.1" contype="1" conaffinity="1"/> -->
        </body>

        <!-- Entrance (Green) -->
        <body name="vessel_entrance" pos="0 0 -0.6025"> <!-- -body_height/2 - disc/2 -->
            <geom type="mesh" mesh="vessel_entrance" rgba="	0.4 1.0 0.4 0.4" contype="3" conaffinity="3"/>
        </body>

        <!-- Exit (Blue) -->
        <body name="vessel_exit" pos="0 0 0.6025"> <!-- +body_height/2 + disc/2 -->
            <geom type="mesh" mesh="vessel_exit" rgba="0.4 0.4 1.0 0.4" contype="0" conaffinity="0"/>
        </body>

        <!-- agent: controllable ball -->
        <body name="agent" pos="0 0 -0.55">
            <geom type="sphere" size="0.05" rgba="1 1 0.6 1" contype="4" conaffinity="1" mass="0.1"/>
            <joint name="x" type="slide" axis="1 0 0"/>
            <joint name="y" type="slide" axis="0 1 0"/>
            <joint name="z" type="slide" axis="0 0 1"/>
        </body>
    </worldbody>

    <actuator>
        <motor joint="x" ctrlrange="-1 1" gear="1"/>
        <motor joint="y" ctrlrange="-1 1" gear="1"/>
        <motor joint="z" ctrlrange="-1 1" gear="1"/>
    </actuator>
</mujoco>
